<div id="navbar" class="mb-3">
  <nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container-fluid">
      <a class="navbar-brand mx-3" [routerLink]="['/index']">Shop</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="bi bi-list"></span>
      </button>

      <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" [routerLink]="['/index']">Inicio</a>
          </li>

          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle"
              href="#"
              id="categoriesDropdown"
              role="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
              >Categorías</a
            >
            <ul
              class="dropdown-menu"
              aria-labelledby="categoriesDropdown"
              id="categoriesMenu"
            >
              <li *ngFor="let category of categories">
                <a class="dropdown-item" (click)="buscarPorCategoria(category)"
                  >{{ category }}</a
                >
              </li>
            </ul>
          </li>

          <li class="nav-item" *ngIf="!loggedIn">
            <a class="nav-link" [routerLink]="['/registrar']">Crea tu cuenta</a>
          </li>
          <li class="nav-item" *ngIf="!loggedIn">
            <a class="nav-link" [routerLink]="['/login']">Ingresa</a>
          </li>

          <li class="nav-item" *ngIf="loggedIn">
            <button class="nav-link" (click)="cerrarSesion()">
              Cerrar sesión
            </button>
          </li>
          <li class="nav-item" *ngIf="loggedIn">
            <a class="nav-link" [routerLink]="['/editar-perfil']">
              Editar perfil</a
            >
          </li>

          <li class="nav-item" *ngIf="loggedIn">
            <a class="nav-link" [routerLink]="['/mis-compras']">Mis compras</a>
          </li>

          <!-- Carrito -->
          <li class="nav-item dropdown custom-dropdown">
            <a
              class="nav-link dropdown-toggle custom-dropdown-toggle"
              href="#"
              role="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
              id="carritoDropdown"
            >
              <i class="bi bi-cart"></i> Carrito
              <span class="badge bg-primary custom-badge"
                >{{ carrito.length }}</span
              >
            </a>
            <ul
              class="dropdown-menu dropdown-menu-end custom-dropdown-menu"
              aria-labelledby="carritoDropdown"
              id="carritoMenu"
            >
              <li class="dropdown-header custom-dropdown-header">
                Productos en el carrito
              </li>
              <li *ngFor="let item of carrito" class="custom-item">
                <div class="row g-0 align-items-center">
                  <div class="col-3">
                    <img
                      [src]="item.image"
                      class="img-fluid custom-item-image"
                      [alt]="item.name"
                    />
                  </div>
                  <div class="col-6 text-center">
                    <h6 class="dropdown-item-title custom-item-title">
                      {{ item.name }}
                    </h6>
                    <p class="dropdown-item-price custom-item-price">
                      {{ item.price | currency }}
                    </p>
                    <p class="dropdown-item-quantity text-bold">
                      x{{ item.quantity }}
                    </p>
                  </div>
                  <div class="col-3">
                    <button
                      type="button"
                      class="btn btn-sm btn-danger custom-btn"
                      (click)="eliminarDelCarrito(item)"
                    >
                      <i class="bi bi-trash"></i>
                    </button>
                  </div>
                </div>
              </li>
              <li
                *ngIf="carrito.length === 0"
                class="dropdown-item text-center"
              >
                No hay productos en el carrito.
              </li>
              <li><hr class="dropdown-divider custom-divider" /></li>

              <li class="dropdown-footer custom-footer">
                <div class="d-grid">
                  <a
                    [routerLink]="['/carrito']"
                    class="btn btn-primary custom-btn mx-3"
                    id="ver-carrito-btn"
                  >
                    Ver Carrito
                  </a>
                </div>
              </li>
            </ul>
          </li>

          <!-- Buscador -->
          <li class="nav-item mx-3">
            <form class="input-group" (submit)="buscarProductos()">
              <input
                type="text"
                name="search"
                id="search"
                class="form-control"
                placeholder="Buscar productos..."
                [(ngModel)]="searchTerm"
              />
              <button type="submit" class="btn btn-primary">Buscar</button>
            </form>
          </li>
        </ul>
      </div>
    </div>
  </nav>
</div>
